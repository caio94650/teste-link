<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Find Real Compatibility Near You</title>
<meta name="theme-color" content="#ff4458">
<style>
  :root{
    --bg:#0f1115; --card:#151922; --soft:#1b2130; --txt:#eef2f7; --muted:#99a3b3;
    --brand:#ff4458; --brand2:#ff2f71; --brand3:#ff7a59; --ok:#28c76f; --warn:#f59e0b;
    --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(160deg,#0d0f14 0%,#121725 100%);color:var(--txt);
       font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif}
  .topbar{
    position:sticky;top:0;z-index:50;
    background:linear-gradient(90deg,var(--brand) 0%,var(--brand2) 50%,var(--brand3) 100%);
    color:#fff; box-shadow:var(--shadow);
  }
  .topwrap{max-width:1040px;margin:0 auto;display:flex;align-items:center;gap:14px;padding:12px 16px}
  .logo{
    display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px
  }
  .logo-mark{
    width:28px;height:28px;border-radius:8px;background:#fff1;display:grid;place-items:center;
    box-shadow:0 6px 18px rgba(0,0,0,.2)
  }
  .logo-mark:before{
    content:"‚ù§";font-size:15px;color:#fff;
  }
  .trust{margin-left:auto;display:flex;gap:14px;align-items:center;font-size:12px;opacity:.95}
  .pill{background:#ffffff22;border:1px solid #ffffff33;color:#fff;border-radius:999px;padding:6px 10px}
  .wrap{max-width:1040px;margin:28px auto;padding:0 16px}
  .hero{
    display:grid;grid-template-columns:1.15fr .85fr;gap:20px;align-items:stretch
  }
  @media (max-width:900px){ .hero{grid-template-columns:1fr} }
  .panel{
    background:linear-gradient(180deg,#181d29 0%,#151922 100%);
    border:1px solid #1f2634;border-radius:18px;box-shadow:var(--shadow);
    overflow:hidden
  }
  .panel .head{padding:22px 22px 0}
  .title{font-size:28px;line-height:1.15;margin:6px 0 8px}
  .subtitle{color:var(--muted);margin:0 0 14px}
  .progress{height:10px;background:#202736;border-radius:999px;overflow:hidden;margin:12px 22px}
  .bar{height:100%;width:0;background:linear-gradient(90deg,var(--brand),var(--brand2));transition:width .35s ease}
  .content{padding:0 22px 22px}
  .q-img{width:100%;height:240px;object-fit:cover;border-radius:14px;margin:14px 0}
  @media (max-width:420px){ .q-img{height:200px} }
  .grid{display:grid;gap:12px}
  .grid-2{grid-template-columns:1fr 1fr}
  @media (max-width:520px){ .grid-2{grid-template-columns:1fr} }
  .btn{
    appearance:none;border:0;border-radius:14px;background:#222a3a;color:#fff;
    padding:14px 12px;font-weight:700;cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,.2);
    outline:none;transition:transform .08s ease, box-shadow .2s ease, background .2s ease
  }
  .btn:hover{transform:translateY(-1px)}
  .btn:active{transform:translateY(0)}
  .btn.brand{
    background:linear-gradient(135deg,var(--brand),var(--brand2));
    box-shadow:0 12px 24px rgba(255,68,88,.32), inset 0 0 0 1px rgba(255,255,255,.06)
  }
  .btn.brand:hover{box-shadow:0 14px 28px rgba(255,68,88,.4)}
  .btn.ghost{background:#1a2231;border:1px solid #243047}
  .center{text-align:center}
  .muted{color:var(--muted);font-size:13px}
  .scan{
    display:grid;gap:10px;justify-items:center;padding:8px 0
  }
  .loader{width:14px;height:14px;border:2px solid #3a455c;border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}
  .found{color:var(--ok);font-weight:800}
  .right{
    background:radial-gradient(1200px 600px at 20% 0%,#ff2f7130 0%,transparent 60%), linear-gradient(180deg,#181d29 0%,#151922 100%);
    border:1px solid #1f2634;border-radius:18px;box-shadow:var(--shadow);overflow:hidden
  }
  .right .cover{width:100%;height:180px;background:url('https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=1200&auto=format&fit=crop') center/cover}
  .right .box{padding:18px 18px 20px}
  .check{display:flex;align-items:center;gap:10px;color:#d9e2ef}
  .check:before{content:"‚úì";color:var(--ok);font-weight:900}
  footer{max-width:1040px;margin:28px auto 40px;padding:0 16px;color:#8e9ab0;font-size:12px;opacity:.9}
  a.clean{color:#cfe1ff;text-decoration:none;border-bottom:1px dotted #cfe1ff44}
</style>
</head>
<body>
  <div class="topbar">
    <div class="topwrap">
      <div class="logo">
        <div class="logo-mark"></div>
        <div id="brandName">HeartMatch</div>
      </div>
      <div class="trust">
        <span class="pill" id="i_badge">Compatibility ‚Ä¢ Step-by-step</span>
        <span class="pill">18+</span>
        <span class="pill">Safe & Verified</span>
      </div>
    </div>
  </div>

  <div class="wrap hero">
    <!-- LEFT: QUIZ -->
    <section class="panel" id="app" dir="ltr" aria-live="polite">
      <div class="head">
        <h1 class="title" id="title">Profiles near <span id="loc-inline">you</span></h1>
        <p class="subtitle" id="subtitle">Answer 3 quick questions to find compatible people in <span id="loc-sub">your area</span>.</p>
      </div>
      <div class="progress"><div class="bar" id="bar"></div></div>
      <div class="content">
        <img id="qimg" class="q-img" src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=1200&auto=format&fit=crop" alt="Happy people">

        <!-- STEP 1 -->
        <section id="step1" class="grid grid-2" role="group" aria-label="step 1">
          <button class="btn" onclick="choose('gender','Male')" id="b_male">I‚Äôm Male</button>
          <button class="btn" onclick="choose('gender','Female')" id="b_female">I‚Äôm Female</button>
        </section>

        <!-- STEP 2 -->
        <section id="step2" class="grid grid-2" role="group" aria-label="step 2" hidden>
          <button class="btn" onclick="choose('seeking','Men')" id="b_seek_men">Looking for Men</button>
          <button class="btn" onclick="choose('seeking','Women')" id="b_seek_women">Looking for Women</button>
          <button class="btn" onclick="choose('seeking','Both')" id="b_seek_both">Both</button>
          <button class="btn ghost" onclick="choose('seeking','Prefer not to say')" id="b_seek_notsay">Prefer not to say</button>
        </section>

        <!-- STEP 3 -->
        <section id="step3" class="grid grid-2" role="group" aria-label="step 3" hidden>
          <button class="btn" onclick="choose('age','18-25')">18‚Äì25</button>
          <button class="btn" onclick="choose('age','26-35')">26‚Äì35</button>
          <button class="btn" onclick="choose('age','36-45')">36‚Äì45</button>
          <button class="btn" onclick="choose('age','46+')">46+</button>
        </section>

        <!-- STEP 4 -->
        <section id="step4" class="grid grid-2" role="group" aria-label="step 4" hidden>
          <button class="btn" onclick="choose('goal','Serious relationship')" id="b_goal_serious">Serious relationship</button>
          <button class="btn" onclick="choose('goal','Casual dates')" id="b_goal_casual">Casual dates</button>
          <button class="btn" onclick="choose('goal','Friendship')" id="b_goal_friend">Friendship</button>
          <button class="btn ghost" onclick="choose('goal','Undecided')" id="b_goal_undecided">Undecided</button>
        </section>

        <!-- SCAN -->
        <section id="scan" class="scan" hidden>
          <div class="loader" aria-hidden="true"></div>
          <div class="pill" style="background:#1e2636;color:#d9e2ef;border:1px solid #2b3550" id="i_scanning">Analyzing answers‚Ä¶</div>
          <p class="muted" id="i_scan_sub">Filtering nearby profiles based on your preferences in <span id="loc-scan">your area</span>.</p>
        </section>

        <!-- RESULT -->
        <section id="result" hidden>
          <h2 class="found" id="i_found">‚úî We found 7 highly compatible profiles in <span id="loc-result">your area</span></h2>
          <p id="summary">Based on your answers, we selected people that match you.</p>
          <ul class="muted" style="padding-left:18px;margin:10px 0 0">
            <li id="i_b1">Verified profiles with shared interests</li>
            <li id="i_b2">Discreet and safe chat</li>
            <li id="i_b3">Free sign-up for new members</li>
          </ul>
          <div class="grid" style="margin-top:16px">
            <a id="cta" class="btn brand center" href="SUA_URL_AQUI">üëâ <span id="i_cta">See my compatible profiles</span></a>
            <button class="btn ghost" onclick="restart()" id="i_restart">Retake quiz</button>
          </div>
          <p class="muted center" style="margin-top:10px" id="i_slots">Local spots update in real time ‚Äî may sell out.</p>
        </section>
      </div>
    </section>

    <!-- RIGHT: TRUST / BENEFITS -->
    <aside class="right" aria-hidden="false">
      <div class="cover" role="img" aria-label="Happy couple"></div>
      <div class="box">
        <h3 style="margin:6px 0 10px">Why people choose HeartMatch</h3>
        <div class="check" id="r1">Real people. No bots.</div>
        <div class="check" id="r2">Compatibility by shared interests</div>
        <div class="check" id="r3">Privacy-first & 18+</div>
        <div class="check" id="r4">Free to start</div>
        <p class="muted" style="margin-top:12px" id="r5">Tip: Clean, non-explicit content = ads approval & better CPM on Facebook/Taboola.</p>
      </div>
    </aside>
  </div>

  <footer>
    <p id="i_footer">
      Informational/entertainment content. No explicit material displayed. By proceeding, you agree to our 
      <a class="clean" href="#" onclick="alert('Basic terms: informational content, no guarantees of results.');return false;">Terms</a>.
    </p>
    <p class="muted">¬© <span id="year"></span> HeartMatch ‚Äî All rights reserved.</p>
  </footer>

<script>
/* ======================
   STATE
====================== */
const state = { gender:null, seeking:null, age:null, goal:null, step:1, total:6,
                city:null, region:null, country:null, cc:null, lang:'en' };

const $ = s => document.querySelector(s);
const show = s => $(s).hidden = false;
const hide = s => $(s).hidden = true;

const L = {
  en:{brand:"HeartMatch", badge:"Compatibility ‚Ä¢ Step-by-step",
    t1:loc=>`Profiles near ${loc||'you'}`, s1:loc=>`Answer 3 quick questions to find compatible people in ${loc||'your area'}.`,
    t2:"Who do you want to meet?", s2:"This helps us show only people you're interested in.",
    t3:"Which age range interests you?", s3:"You can adjust later if you want.",
    t4:"What are you looking for now?", s4:"No judgments ‚Äî choose what makes sense for you.",
    scanning:"Analyzing answers‚Ä¶", scanSub:loc=>`Filtering nearby profiles based on your preferences in ${loc||'your area'}.`,
    found:loc=>`‚úî We found 7 highly compatible profiles in ${loc||'your area'}`,
    b1:"Verified profiles with shared interests", b2:"Discreet and safe chat", b3:"Free sign-up for new members",
    cta:"See my compatible profiles", restart:"Retake quiz", slots:"Local spots update in real time ‚Äî may sell out",
    male:"I‚Äôm Male", female:"I‚Äôm Female",
    seek_men:"Looking for Men", seek_women:"Looking for Women", seek_both:"Both", seek_notsay:"Prefer not to say",
    goal_serious:"Serious relationship", goal_casual:"Casual dates", goal_friend:"Friendship", goal_und:"Undecided",
    r1:"Real people. No bots.", r2:"Compatibility by shared interests", r3:"Privacy-first & 18+", r4:"Free to start", r5:"Tip: Clean, non-explicit content = ads approval & better CPM on Facebook/Taboola.",
    footer:"Informational/entertainment content. No explicit material displayed. By proceeding, you agree to our Terms."
  },
  pt:{brand:"HeartMatch", badge:"Compatibilidade ‚Ä¢ Passo a passo",
    t1:loc=>`Perfis pr√≥ximos de ${loc||'voc√™'}`, s1:loc=>`Responda 3 perguntas r√°pidas para encontrar pessoas compat√≠veis em ${loc||'sua regi√£o'}.`,
    t2:"Quem voc√™ quer conhecer?", s2:"Isso ajuda a mostrar apenas pessoas do seu interesse.",
    t3:"Qual faixa et√°ria te interessa?", s3:"Voc√™ pode ajustar depois, se quiser.",
    t4:"O que voc√™ busca agora?", s4:"Sem julgamentos ‚Äî escolha o que faz sentido pra voc√™.",
    scanning:"Analisando respostas‚Ä¶", scanSub:loc=>`Filtrando perfis pr√≥ximos de ${loc||'voc√™'} com base nas suas prefer√™ncias.`,
    found:loc=>`‚úî Encontramos 7 perfis com alta compatibilidade em ${loc||'sua regi√£o'}`,
    b1:"Perfis verificados e com interesses em comum", b2:"Chat discreto e seguro", b3:"Inscri√ß√£o gratuita para novos membros",
    cta:"Ver meus perfis compat√≠veis", restart:"Refazer quiz", slots:"Vagas locais atualizam em tempo real ‚Äî pode esgotar",
    male:"Sou Homem", female:"Sou Mulher",
    seek_men:"Procuro Homens", seek_women:"Procuro Mulheres", seek_both:"Ambos", seek_notsay:"Prefiro n√£o dizer",
    goal_serious:"Relacionamento s√©rio", goal_casual:"Encontros casuais", goal_friend:"Amizade", goal_und:"Indefinido",
    r1:"Pessoas reais. Sem bots.", r2:"Compatibilidade por interesses em comum", r3:"Privacidade em primeiro lugar ‚Ä¢ 18+", r4:"Comece gr√°tis", r5:"Dica: Conte√∫do limpo e n√£o expl√≠cito = aprova√ß√£o e CPM melhor no Facebook/Taboola.",
    footer:"Conte√∫do de entretenimento/informativo. N√£o exibimos material expl√≠cito. Ao prosseguir, voc√™ concorda com nossos Termos."
  },
  da:{brand:"HeartMatch", badge:"Kompatibilitet ‚Ä¢ Trin for trin",
    t1:loc=>`Profiler i n√¶rheden af ${loc||'dig'}`, s1:loc=>`Svar p√• 3 hurtige sp√∏rgsm√•l for at finde kompatible personer i ${loc||'dit omr√•de'}.`,
    t2:"Hvem vil du m√∏de?", s2:"Det hj√¶lper os med kun at vise relevante personer.",
    t3:"Hvilken aldersgruppe interesserer dig?", s3:"Du kan justere det senere.",
    t4:"Hvad s√∏ger du nu?", s4:"Ingen dom ‚Äî v√¶lg det, der passer til dig.",
    scanning:"Analyserer svar‚Ä¶", scanSub:loc=>`Filtrerer n√¶rliggende profiler baseret p√• dine pr√¶ferencer i ${loc||'dit omr√•de'}.`,
    found:loc=>`‚úî Vi fandt 7 meget kompatible profiler i ${loc||'dit omr√•de'}`,
    b1:"Verificerede profiler med f√¶lles interesser", b2:"Diskret og sikker chat", b3:"Gratis tilmelding for nye medlemmer",
    cta:"Se mine kompatible profiler", restart:"Tag quizzen igen", slots:"Lokale pladser opdateres i realtid ‚Äî kan blive udsolgt",
    male:"Jeg er mand", female:"Jeg er kvinde",
    seek_men:"Jeg s√∏ger m√¶nd", seek_women:"Jeg s√∏ger kvinder", seek_both:"Begge", seek_notsay:"Vil ikke sige",
    goal_serious:"Seri√∏st forhold", goal_casual:"Uforpligtende m√∏der", goal_friend:"Venskab", goal_und:"Uafklaret",
    r1:"Rigtige mennesker. Ingen bots.", r2:"Kompatibilitet via f√¶lles interesser", r3:"Privatliv f√∏rst ‚Ä¢ 18+", r4:"Gratis at starte", r5:"Tip: Rent, ikke-eksplicit indhold = godkendelse og bedre CPM p√• Facebook/Taboola.",
    footer:"Informations-/underholdningsindhold. Intet eksplicit materiale. Ved at forts√¶tte accepterer du vores vilk√•r."
  },
  nb:{brand:"HeartMatch", badge:"Kompatibilitet ‚Ä¢ Trinn for trinn",
    t1:loc=>`Profiler n√¶r ${loc||'deg'}`, s1:loc=>`Svar p√• 3 raske sp√∏rsm√•l for √• finne kompatible personer i ${loc||'omr√•det ditt'}.`,
    t2:"Hvem vil du m√∏te?", s2:"Dette hjelper oss √• vise bare relevante personer.",
    t3:"Hvilken aldersgruppe interesserer deg?", s3:"Du kan justere senere.",
    t4:"Hva ser du etter n√•?", s4:"Ingen d√∏mming ‚Äî velg det som passer for deg.",
    scanning:"Analyserer svar‚Ä¶", scanSub:loc=>`Filtrerer n√¶rliggende profiler basert p√• preferansene dine i ${loc||'omr√•det ditt'}.`,
    found:loc=>`‚úî Vi fant 7 sv√¶rt kompatible profiler i ${loc||'omr√•det ditt'}`,
    b1:"Verifiserte profiler med felles interesser", b2:"Diskret og trygg chat", b3:"Gratis registrering for nye brukere",
    cta:"Se mine kompatible profiler", restart:"Ta testen p√• nytt", slots:"Lokale plasser oppdateres i sanntid ‚Äî kan bli utsolgt",
    male:"Jeg er mann", female:"Jeg er kvinne",
    seek_men:"Ser etter menn", seek_women:"Ser etter kvinner", seek_both:"Begge", seek_notsay:"Vil ikke si",
    goal_serious:"Seri√∏st forhold", goal_casual:"Uforpliktende m√∏ter", goal_friend:"Vennskap", goal_und:"Ubestemt",
    r1:"Ekte mennesker. Ingen roboter.", r2:"Kompatibilitet via felles interesser", r3:"Personvern f√∏rst ‚Ä¢ 18+", r4:"Gratis √• starte", r5:"Tips: Rent, ikke-eksplicit innhold = godkjenning og bedre CPM p√• Facebook/Taboola.",
    footer:"Informasjons-/underholdningsinnhold. Ingen eksplisitt materiale. Ved √• fortsette godtar du v√•re vilk√•r."
  },
  uk:{brand:"HeartMatch", badge:"–°—É–º—ñ—Å–Ω—ñ—Å—Ç—å ‚Ä¢ –ö—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º",
    t1:loc=>`–ü—Ä–æ—Ñ—ñ–ª—ñ –ø–æ—Ä—É—á —ñ–∑ ${loc||'–≤–∞–º–∏'}`, s1:loc=>`–î–∞–π—Ç–µ 3 —à–≤–∏–¥–∫—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —â–æ–± –∑–Ω–∞–π—Ç–∏ —Å—É–º—ñ—Å–Ω–∏—Ö –ª—é–¥–µ–π —É ${loc||'–≤–∞—à–æ–º—É —Ä–∞–π–æ–Ω—ñ'}.`,
    t2:"–ö–æ–≥–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑—É—Å—Ç—Ä—ñ—Ç–∏?", s2:"–ü–æ–∫–∞–∑—É—î–º–æ –ª–∏—à–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ.",
    t3:"–Ø–∫–∞ –≤—ñ–∫–æ–≤–∞ –≥—Ä—É–ø–∞ —Ü—ñ–∫–∞–≤–∏—Ç—å?", s3:"–ó–∞ –ø–æ—Ç—Ä–µ–±–∏ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ.",
    t4:"–©–æ –≤–∏ —à—É–∫–∞—î—Ç–µ –∑–∞—Ä–∞–∑?", s4:"–ë–µ–∑ –æ—Å—É–¥—É ‚Äî –æ–±–µ—Ä—ñ—Ç—å —Ç–µ, —â–æ –≤–∞–º –ø—ñ–¥—Ö–æ–¥–∏—Ç—å.",
    scanning:"–ê–Ω–∞–ª—ñ–∑—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ‚Ä¶", scanSub:loc=>`–§—ñ–ª—å—Ç—Ä—É—î–º–æ –ø—Ä–æ—Ñ—ñ–ª—ñ –ø–æ—Ä—É—á –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–∞—à–∏—Ö –≤–ø–æ–¥–æ–±–∞–Ω—å —É ${loc||'–≤–∞—à–æ–º—É —Ä–∞–π–æ–Ω—ñ'}.`,
    found:loc=>`‚úî –ú–∏ –∑–Ω–∞–π—à–ª–∏ 7 –¥—É–∂–µ —Å—É–º—ñ—Å–Ω–∏—Ö –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ —É ${loc||'–≤–∞—à–æ–º—É —Ä–∞–π–æ–Ω—ñ'}`,
    b1:"–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ –∑—ñ —Å–ø—ñ–ª—å–Ω–∏–º–∏ —ñ–Ω—Ç–µ—Ä–µ—Å–∞–º–∏", b2:"–î–∏—Å–∫—Ä–µ—Ç–Ω–∏–π —ñ –±–µ–∑–ø–µ—á–Ω–∏–π —á–∞—Ç", b3:"–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤",
    cta:"–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—É–º—ñ—Å–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ", restart:"–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —â–µ —Ä–∞–∑", slots:"–õ–æ–∫–∞–ª—å–Ω—ñ —Å–ª–æ—Ç–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ ‚Äî –º–æ–∂—É—Ç—å –∑–∞–∫—ñ–Ω—á–∏—Ç–∏—Å—è",
    male:"–Ø ‚Äî —á–æ–ª–æ–≤—ñ–∫", female:"–Ø ‚Äî –∂—ñ–Ω–∫–∞",
    seek_men:"–®—É–∫–∞—é —á–æ–ª–æ–≤—ñ–∫—ñ–≤", seek_women:"–®—É–∫–∞—é –∂—ñ–Ω–æ–∫", seek_both:"–û–±–æ—Ö", seek_notsay:"–í–∞–∂–∫–æ —Å–∫–∞–∑–∞—Ç–∏",
    goal_serious:"–°–µ—Ä–π–æ–∑–Ω—ñ —Å—Ç–æ—Å—É–Ω–∫–∏", goal_casual:"–ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ñ –ø–æ–±–∞—á–µ–Ω–Ω—è", goal_friend:"–î—Ä—É–∂–±–∞", goal_und:"–ù–µ –≤–∏–∑–Ω–∞—á–∏–≤—Å—è",
    r1:"–°–ø—Ä–∞–≤–∂–Ω—ñ –ª—é–¥–∏. –ë–µ–∑ –±–æ—Ç—ñ–≤.", r2:"–°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑–∞ —Å–ø—ñ–ª—å–Ω–∏–º–∏ —ñ–Ω—Ç–µ—Ä–µ—Å–∞–º–∏", r3:"–ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å –ø–æ–Ω–∞–¥ —É—Å–µ ‚Ä¢ 18+", r4:"–ü–æ—á–Ω—ñ—Ç—å –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ", r5:"–ü–æ—Ä–∞–¥–∞: –ß–∏—Å—Ç–∏–π, –Ω–µ—è–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç = —Å—Ö–≤–∞–ª–µ–Ω–Ω—è —Ç–∞ –∫—Ä–∞—â–∏–π CPM —É Facebook/Taboola.",
    footer:"–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π/—Ä–æ–∑–≤–∞–∂–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç. –ë–µ–∑ –≤—ñ–¥–≤–µ—Ä—Ç–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤. –ü—Ä–æ–¥–æ–≤–∂—É—é—á–∏, –≤–∏ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—å —ñ–∑ –Ω–∞—à–∏–º–∏ —É–º–æ–≤–∞–º–∏."
  }
};

/* INIT */
document.getElementById('year').textContent = new Date().getFullYear();
detectLocation().then(updateUI);

/* QUIZ */
function choose(key,value){
  state[key]=value; try{ localStorage.setItem('quizDating', JSON.stringify(state)); }catch(e){}
  if(state.step===1) state.step=2;
  else if(state.step===2) state.step=3;
  else if(state.step===3) state.step=4;
  else if(state.step===4){ state.step=5; startScan(); }
  updateUI();
}
function restart(){
  Object.assign(state,{gender:null,seeking:null,age:null,goal:null,step:1});
  updateUI(true);
}

/* UI */
function updateUI(resetImg){
  const where = prettyLoc();
  const t = L[state.lang] || L.en;

  // brand + copy
  setText('#brandName', t.brand); setText('#i_badge', t.badge);
  setText('#title', t.t1(where)); setText('#subtitle', t.s1(where));
  setText('#i_scanning', t.scanning); setText('#i_scan_sub', t.scanSub(where));
  setText('#i_found', t.found(where));
  setText('#i_b1', t.b1); setText('#i_b2', t.b2); setText('#i_b3', t.b3);
  setText('#i_cta', t.cta); setText('#i_restart', t.restart); setText('#i_slots', t.slots);
  setText('#b_male', t.male); setText('#b_female', t.female);
  setText('#b_seek_men', t.seek_men); setText('#b_seek_women', t.seek_women); setText('#b_seek_both', t.seek_both); setText('#b_seek_notsay', t.seek_notsay);
  setText('#b_goal_serious', t.goal_serious); setText('#b_goal_casual', t.goal_casual); setText('#b_goal_friend', t.goal_friend); setText('#b_goal_undecided', t.goal_und);

  setText('#loc-inline', where || (state.lang==='pt'?'voc√™':'you'));
  setText('#loc-sub', where || (state.lang==='pt'?'sua regi√£o':'your area'));
  setText('#loc-scan', where || (state.lang==='pt'?'voc√™':'you'));
  setText('#loc-result', where || (state.lang==='pt'?'sua regi√£o':'your area'));

  // right-box localized bullets
  setText('#r1', t.r1); setText('#r2', t.r2); setText('#r3', t.r3); setText('#r4', t.r4); setText('#r5', t.r5);
  setText('#i_footer', t.footer);

  // progress
  const pct = Math.min(Math.round((state.step-1)/state.total*100),100);
  $('#bar').style.width = pct + '%';

  // step titles switch
  if(state.step===2){ setText('#title', t.t2); setText('#subtitle', t.s2); }
  if(state.step===3){ setText('#title', t.t3); setText('#subtitle', t.s3); }
  if(state.step===4){ setText('#title', t.t4); setText('#subtitle', t.s4); }

  if(resetImg!==false){
    const img = (state.step>=5)
      ? 'https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=1200&auto=format&fit=crop'
      : 'https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=1200&auto=format&fit=crop';
    $('#qimg').src = img;
  }

  // visibility
  hide('#step1'); hide('#step2'); hide('#step3'); hide('#step4'); hide('#scan'); hide('#result');
  if(state.step===1) show('#step1');
  if(state.step===2) show('#step2');
  if(state.step===3) show('#step3');
  if(state.step===4) show('#step4');
  if(state.step===5) show('#scan');
  if(state.step===6){
    // summary line
    const parts=[];
    if(state.gender) parts.push( state.lang==='pt' ? `Voc√™ √© ${translateGender(state.gender,'pt')}` : `You are ${state.gender.toLowerCase()}` );
    if(state.seeking && state.seeking!=='Prefer not to say') parts.push( state.lang==='pt' ? `procura ${translateSeeking(state.seeking,'pt')}` : `looking for ${state.seeking.toLowerCase()}` );
    if(state.age) parts.push( (state.lang==='pt' ? 'na faixa ' : 'in the range ') + state.age );
    if(state.goal && state.goal!=='Undecided') parts.push( (state.lang==='pt' ? 'para ' : 'for ') + state.goal.toLowerCase() );
    if(where) parts.push( (state.lang==='pt' ? 'em ' : 'in ') + where );
    setText('#summary', parts.length ? parts.join(', ') + '.' :
      (state.lang==='pt' ? 'Baseado nas suas respostas, selecionamos pessoas que combinam com voc√™.' :
                           'Based on your answers, we selected people that match you.')
    );

    // CTA URL + params
    const url = new URL('SUA_URL_AQUI', location.href);
    url.searchParams.set('utm_source', detectSource());
    url.searchParams.set('utm_campaign','quiz_compatibility');
    url.searchParams.set('g', state.gender||'');
    url.searchParams.set('s', state.seeking||'');
    url.searchParams.set('a', state.age||'');
    url.searchParams.set('goal', state.goal||'');
    if(state.city) url.searchParams.set('loc_city', state.city);
    if(state.region) url.searchParams.set('loc_region', state.region);
    if(state.country) url.searchParams.set('loc_country', state.country);
    if(state.cc) url.searchParams.set('cc', state.cc);
    $('#cta').href = url.toString();

    show('#result');
  }
}

/* Scan fake */
function startScan(){
  const status = document.createElement('div');
  status.className = 'muted';
  status.id='scanStatus';
  $('#scan').appendChild(status);
  let pct = 0; show('#scan');
  const timer = setInterval(()=>{
    pct += Math.floor(Math.random()*17)+6; if(pct>100) pct=100;
    status.textContent = (state.lang==='pt'?'Procurando compatibilidades‚Ä¶ ':'Searching matches‚Ä¶ ') + pct + '%';
    if(pct>=100){ clearInterval(timer); setTimeout(()=>{ state.step=6; updateUI(false); }, 400); }
  }, 450);
}

/* Helpers */
function setText(sel,val){ const n=$(sel); if(n) n.textContent=val; }
function prettyLoc(){
  if(state.city && state.region) return `${state.city}/${state.region}`;
  if(state.city && state.country) return `${state.city}, ${state.country}`;
  if(state.region && state.country) return `${state.region}, ${state.country}`;
  if(state.country) return state.country;
  return '';
}
function translateGender(v,lang){ if(lang!=='pt') return v; return v==='Male'?'homem': v==='Female'?'mulher': v; }
function translateSeeking(v,lang){ if(lang!=='pt') return v; return v==='Men'?'homens': v==='Women'?'mulheres': v==='Both'?'ambos':'‚Äî'; }
function detectSource(){ const r=(document.referrer||'').toLowerCase();
  if(r.includes('facebook')) return 'facebook';
  if(r.includes('taboola')) return 'taboola';
  return 'native'; }

/* GEO + AUTOLANG */
async function detectLocation(){
  try{
    const a = await fetch('https://ipapi.co/json/').then(r=>r.ok?r.json():Promise.reject());
    if(a){
      Object.assign(state,{
        city:a.city||null,
        region:(a.region_code||a.region||'').replace('State of ','')||null,
        country:a.country_name||a.country||null,
        cc:(a.country||'').toUpperCase()
      });
      chooseLangByCC(state.cc);
      return;
    }
  }catch(e){}
  try{
    const b = await fetch('https://ipwho.is/').then(r=>r.ok?r.json():Promise.reject());
    if(b && b.success!==false){
      Object.assign(state,{
        city:b.city||null, region:b.region||null, country:b.country||null,
        cc:(b.country_code||'').toUpperCase()
      });
      chooseLangByCC(state.cc);
      return;
    }
  }catch(e){}
  const docLang=(document.documentElement.getAttribute('lang')||'en').slice(0,2);
  state.lang = ['en','pt','da','nb','uk'].includes(docLang)?docLang:'en';
}
function chooseLangByCC(cc){
  if(cc==='DK') state.lang='da';
  else if(cc==='NO') state.lang='nb';
  else if(cc==='UA') state.lang='uk';
  else if(cc==='BR'||cc==='PT') state.lang='pt';
  else state.lang='en';
}
</script>

<!-- Pixel exemplo (opcional)
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const cta=document.getElementById('cta');
  cta.addEventListener('click', ()=>{ try{ fbq && fbq('trackCustom','QuizCTA'); }catch(e){} });
});
</script>
-->
</body>
</html>
